<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - India Progress Monitor</title>
    <link rel="stylesheet" href="/css/main.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="bg-dark border-b border-gray-700 px-8 py-4 flex justify-between items-center sticky top-0 z-[100]">
        <div class="flex items-center gap-2">
            <span class="text-2xl">üå±</span>
            <span class="text-lg font-bold text-white">India Progress Monitor</span>
            <span class="bg-primary text-white text-xs font-bold px-2 py-1 rounded ml-2">ADMIN</span>
        </div>
        <div class="flex items-center gap-1">
            <a href="admin.html" class="bg-primary/10 text-primary text-sm font-medium px-4 py-2 rounded-lg transition-colors duration-150">Overview</a>
            <a href="admin-partners.html" class="text-gray-300 font-medium text-sm px-4 py-2 rounded-lg transition-colors duration-150 hover:text-white hover:bg-gray-800">Partners</a>
            <a href="admin-funding.html" class="text-gray-300 font-medium text-sm px-4 py-2 rounded-lg transition-colors duration-150 hover:text-white hover:bg-gray-800">Funding</a>
            <a href="admin-funders.html" class="text-gray-300 font-medium text-sm px-4 py-2 rounded-lg transition-colors duration-150 hover:text-white hover:bg-gray-800">Funders</a>
            <a href="admin-roadmap.html" class="text-gray-300 font-medium text-sm px-4 py-2 rounded-lg transition-colors duration-150 hover:text-white hover:bg-gray-800">Roadmap</a>
            <button id="logoutBtn" class="text-gray-300 font-medium text-sm px-4 py-2 rounded-lg transition-colors duration-150 hover:text-white hover:bg-gray-800 hidden">Logout</button>
        </div>
    </nav>

    <main class="max-w-[1400px] mx-auto px-12 py-12">
        <!-- Admin Header -->
        <section class="flex justify-between items-center mb-12">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Portfolio Management Dashboard</h1>
                <p class="text-sm text-gray-500 mt-1">Confidential - Internal Use Only</p>
            </div>
            <div class="flex gap-3">
                <button class="bg-white border border-gray-300 text-gray-700 px-6 py-3 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors duration-150 inline-flex items-center gap-2" id="refreshData">
                    <span>‚Üª</span> Refresh Data
                </button>
                <button class="bg-primary text-white px-6 py-3 rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors duration-150 inline-flex items-center gap-2" id="exportReport">
                    <span>‚Üì</span> Export Report
                </button>
            </div>
        </section>

        <!-- Quick Stats -->
        <section class="mb-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="text-3xl mb-3">ü§ù</div>
                    <div class="mb-2">
                        <span class="block text-2xl font-bold text-gray-900 mb-1" id="total-partners">24</span>
                        <span class="block text-sm text-gray-600">Partner Organizations</span>
                    </div>
                    <div class="text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded inline-block mt-2">11 Signed</div>
                </div>
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="text-3xl mb-3">üí∞</div>
                    <div class="mb-2">
                        <span class="block text-2xl font-bold text-gray-900 mb-1" id="total-budget">‚Çπ253-270 Cr</span>
                        <span class="block text-sm text-gray-600">Total Portfolio (3 Years)</span>
                    </div>
                    <div class="text-xs text-gray-600 font-medium bg-gray-100 px-2 py-1 rounded inline-block mt-2">Approved</div>
                </div>
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="text-3xl mb-3">üèòÔ∏è</div>
                    <div class="mb-2">
                        <span class="block text-2xl font-bold text-gray-900 mb-1" id="wards-covered">596</span>
                        <span class="block text-sm text-gray-600">Wards with Climate Data</span>
                    </div>
                    <div class="text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded inline-block mt-2">2 Cities Live</div>
                </div>
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="text-3xl mb-3">üí∏</div>
                    <div class="mb-2">
                        <span class="block text-2xl font-bold text-gray-900 mb-1" id="disbursed">‚Çπ0 Cr</span>
                        <span class="block text-sm text-gray-600">Disbursed</span>
                    </div>
                    <div class="text-xs text-gray-600 font-medium bg-gray-100 px-2 py-1 rounded inline-block mt-2">Q1 Target: ‚Çπ50-60 Cr</div>
                </div>
            </div>
        </section>

        <!-- Portfolio Allocation -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Portfolio Allocation</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Budget by Category</h3>
                    <canvas id="budgetChart"></canvas>
                </div>
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Year-wise Phasing</h3>
                    <canvas id="phasingChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Partner Overview Table -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Partner Portfolio Overview</h2>
            <div class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden">
                <table class="w-full text-sm text-left" id="partnerTable">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Organization</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Category</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Allocation (‚Çπ Cr)</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Agreement Status</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Q1 Progress</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="partnerTableBody">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 90-Day Roadmap Summary -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">90-Day Launch Progress</h2>
            <div class="space-y-6">
                <div class="bg-white border-l-4 border-primary rounded-lg p-6 shadow-sm">
                    <div class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold text-sm mb-3">1</div>
                    <div class="space-y-2">
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Month 1: Foundation</h4>
                        <p>Internal alignment, partner outreach</p>
                        <span class="bg-primary text-white px-3 py-1 rounded text-xs font-medium inline-block mt-2">Current Phase</span>
                        <ul class="space-y-2 mt-3 text-sm text-gray-700">
                            <li class="flex items-center gap-2 text-gray-700"><span class="text-green-600 font-bold">‚úì</span> Review strategy documents</li>
                            <li class="flex items-center gap-2 text-gray-700"><span class="text-green-600 font-bold">‚úì</span> Finalize portfolio budget</li>
                            <li>Establish PMU structure</li>
                            <li>Complete 10 discovery calls</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white border-l-4 border-gray-200 rounded-lg p-6 shadow-sm opacity-70">
                    <div class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold text-sm mb-3">2</div>
                    <div class="space-y-2">
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Month 2: Partnership Development</h4>
                        <p>Agreement development, cluster workshops</p>
                        <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded text-xs font-medium inline-block mt-2">Upcoming</span>
                        <ul class="space-y-2 mt-3 text-sm text-gray-700">
                            <li>Sign 5 Tier 1 Agreements</li>
                            <li>Buildings Cluster Workshop</li>
                            <li>Circular Economy Workshop</li>
                            <li>Behavior Cluster Workshop</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white border-l-4 border-gray-200 rounded-lg p-6 shadow-sm opacity-70">
                    <div class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold text-sm mb-3">3</div>
                    <div class="space-y-2">
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Month 3: Operationalization</h4>
                        <p>Dashboard MVP, first disbursements</p>
                        <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded text-xs font-medium inline-block mt-2">Upcoming</span>
                        <ul class="space-y-2 mt-3 text-sm text-gray-700">
                            <li>Dashboard MVP live</li>
                            <li>‚Çπ50-60 Cr disbursed</li>
                            <li>5 partner dashboards</li>
                            <li>Launch event completed</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Risk Monitoring -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Risk Monitoring</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white border-l-4 border-green-500 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-sm font-bold">LOW</span>
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Budget Utilization</h4>
                    </div>
                    <p>On track for Q1 disbursement targets</p>
                </div>
                <div class="bg-white border-l-4 border-amber-500 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-sm font-bold">MEDIUM</span>
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Partner Onboarding</h4>
                    </div>
                    <p>Agreement negotiations in progress</p>
                </div>
                <div class="bg-white border-l-4 border-green-500 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-sm font-bold">LOW</span>
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Data Quality</h4>
                    </div>
                    <p>Baseline collection framework ready</p>
                </div>
                <div class="bg-white border-l-4 border-green-500 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-sm font-bold">LOW</span>
                        <h4 class="text-base font-semibold text-gray-900 mb-2">Policy Windows</h4>
                    </div>
                    <p>Battery EPR timeline on track</p>
                </div>
            </div>
        </section>

        <!-- NoTF Ward-Level Climate Data -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">NoTF: Ward-Level Climate Data Platform</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">üìä Bengaluru (Live)</h3>
                        <span class="text-sm font-bold text-primary">369 Wards</span>
                    </div>
                    <div class="text-xs text-gray-600">
                        <div class="w-full h-2 bg-gray-100 rounded-full overflow-hidden mb-3">
                            <div class="h-full bg-primary transition-all duration-300" style="width: 63%"></div>
                        </div>
                        <span>63% Data Quality</span>
                    </div>
                    <ul class="space-y-1 text-xs text-gray-600">
                        <li><strong>Energy & Buildings:</strong> 100% coverage</li>
                        <li><strong>Waste Management:</strong> 100% coverage</li>
                        <li><strong>Urban Greening:</strong> 100% coverage</li>
                        <li><strong>Transportation:</strong> Partial data</li>
                        <li><strong>Air Quality:</strong> 16 stations</li>
                        <li><strong>Disaster Resilience:</strong> Flood 100%, Heat partial</li>
                    </ul>
                </div>
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">üìä Mumbai (Live)</h3>
                        <span class="text-sm font-bold text-primary">227 Wards</span>
                    </div>
                    <div class="text-xs text-gray-600">
                        <div class="w-full h-2 bg-gray-100 rounded-full overflow-hidden mb-3">
                            <div class="h-full bg-primary transition-all duration-300" style="width: 60%"></div>
                        </div>
                        <span>60% Data Quality</span>
                    </div>
                    <ul class="space-y-1 text-xs text-gray-600">
                        <li><strong>Energy & Buildings:</strong> 100% coverage</li>
                        <li><strong>Waste Management:</strong> 100% coverage</li>
                        <li><strong>Transportation:</strong> Pending</li>
                        <li><strong>Air Quality:</strong> Pending</li>
                        <li><strong>Water Resources:</strong> Pending</li>
                        <li><strong>Urban Greening:</strong> Pending</li>
                    </ul>
                </div>
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">üóìÔ∏è Planned 2026</h3>
                        <span class="text-sm font-bold text-primary">766 Wards</span>
                    </div>
                    <div class="text-xs text-gray-600">
                        <div class="w-full h-2 bg-gray-100 rounded-full overflow-hidden mb-3">
                            <div class="h-full bg-primary transition-all duration-300" style="width: 0%"></div>
                        </div>
                        <span>In Planning</span>
                    </div>
                    <ul class="space-y-1 text-xs text-gray-600">
                        <li><strong>Delhi:</strong> 272 wards (Q2 2026)</li>
                        <li><strong>Chennai:</strong> 200 wards (Q2 2026)</li>
                        <li><strong>Hyderabad:</strong> 150 wards (Q3 2026)</li>
                        <li><strong>Pune:</strong> 144 wards (Q3 2026)</li>
                        <li><strong>Target:</strong> 8 cities by Year 3</li>
                        <li><strong>License:</strong> CC BY-NC-SA 4.0</li>
                    </ul>
                </div>
            </div>
            <div class="text-sm text-gray-600 mb-4">
                <p><strong>Data Sources:</strong> Census of India 2011, BBMP, MCGM, OpenCity.in, KSPCB, MPCB, IISc, Praja Foundation, DataMeet. Platform supports 11 Indian languages.</p>
            </div>
        </section>

    </main>

    <footer class="bg-dark border-t border-gray-700 py-8 px-12 mt-16">
        <div class="max-w-[1400px] mx-auto text-center">
            <p>India Progress Monitor - Admin Dashboard</p>
            <p class="text-sm text-gray-400">Classification: CONFIDENTIAL | Last updated: <span id="lastUpdated">-</span></p>
        </div>
    </footer>

    <script src="js/supabase-config.js"></script>
    <script src="js/admin-auth.js"></script>
    <script src="js/config.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
